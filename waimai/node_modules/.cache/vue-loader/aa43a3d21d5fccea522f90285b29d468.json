{"remainingRequest":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\src\\components\\xz\\cart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\src\\components\\xz\\cart.vue","mtime":1560411102000},{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\web xly\\wechat\\vue ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*最外层商品容器*/\n.cart-item{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width:100%;\n}\n/*修改左侧图片与文字*/\n.leftImgTxt{\n    display: flex;\n    align-items: center;\n}\n\n/*修改左侧图片*/\n.img{\n    width:100px;\n    height:100px;\n}\n.rightImg{\n    display: flex;\n    align-items: center;\n    margin-left: 25px;\n}\n.deleteAll{\n    display: flex;\n    justify-content: space-between;\n}\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n<div class=\"cart\">\r\n    <!-- 全选按钮 -->\r\n    <div class=\"selectAll\">\r\n        全选\r\n        <input type=\"checkbox\" @change=\"changeState\"/>\r\n    </div>\r\n    <!-- 购物商品信息 -->\r\n    <div class=\"cart-item\" v-for=\"(item,index) of list\" :key=\"index\">\r\n        <div class=\"leftImgTxt\" >\r\n            <input type=\"checkbox\" v-model=\"item.cd\">\r\n            <!-- :checkbox=\"item.cd\"按全选时，下面的全部选中 取消时，全部取消-->\r\n            <img :src=\"'http://127.0.0.1:3000/'+item.img\" alt=\"\" class=\"img\">\r\n            <!-- 图片动态引入，图片要放在服务器端的public下，用express.static引入app.js中 -->\r\n            <div class=\"rightImg\">\r\n                <span>{{item.price}}</span>\r\n                <div>\r\n                <button>-</button>\r\n                <span>{{item.count}}</span>\r\n                <button>+</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <mt-button @click=\"delItem\" :data-id=\"item.id\" style=\"color:#fff;\">删除</mt-button>\r\n    </div>\r\n    <!-- 删除选中商品 -->\r\n    <div class=\"deleteAll\">\r\n        <mt-button @click=\"delAll\" style=\"color:#fff;\">清空购物车</mt-button>\r\n        <mt-button @click=\"del\" style=\"color:#fff;\">删除</mt-button>\r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n          list:[]\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore()\r\n    },\r\n    methods:{\r\n        del(){\r\n            // var state=e.target.checked;\r\n           console.log(this.list)\r\n           this.$messagebox({\r\n               title:\"\",\r\n               message:\"确定删除选中商品吗\",\r\n               showConfirmButton:true,\r\n               showCancelButton:true\r\n           }).then(result=>{\r\n               if(\"cancel\"==result){\r\n                   return;\r\n               }else{\r\n\r\n              \r\n           //1.创建变量保存空字符串\r\n            var str=\"\";\r\n            //2.创建循环每个数组中元素\r\n            for(var item of this.list){\r\n                 var state=item.cd\r\n                 //3.判断cd==true\r\n                if(state==true){\r\n                    //4.获取当前id的拼接\r\n                    str+=item.id+\",\";\r\n                }\r\n            }\r\n            //解决在点击清空购物车按钮后，再次点击按钮，没有数据上传报的错误\r\n            if(str.length==0){\r\n                 this.$toast(\"请选中要删除的数据\");\r\n                return;\r\n            }else{\r\n            str=str.substring(0,str.length-1);\r\n            console.log(str)\r\n            //发送ajax请求\r\n            this.axios.get(\"delAll\",{\r\n                params:{\r\n                    ids:str\r\n                }\r\n            }).then(result=>{\r\n                console.log(result)\r\n                //刷新\r\n                 this.loadMore()\r\n                //  location.reload()同history go(0)一样的效果\r\n            })\r\n            }\r\n             }\r\n           })\r\n        },\r\n        loadMore(){\r\n             console.log(123)\r\n            //1.创建url\r\n            var url=\"cart\";\r\n            //2.发送ajax请求\r\n            this.axios.get(url,{\r\n                // params:{\r\n                //     uid:this.uid   \r\n                // }\r\n            }).then(result=>{\r\n                //(1)获取数组\r\n                var rows=result.data.data;\r\n                //(2)创建循环为数组中元素添cd属性\r\n                for(var item of rows){\r\n                    item.cd=false;\r\n                }\r\n                //(3)将修改时后数据复制list\r\n                this.list=rows\r\n                //3.获取服务器购物车数据\r\n                // console.log(result.data.data)\r\n                //4.保存\r\n                // var rows=this.list.concat(result.data.data)\r\n                // this.list=rows  两种方法皆可\r\n                // this.list=result.data.data\r\n            })\r\n        },\r\n        //删除指定购物车商品\r\n        delItem(e){\r\n            //删除之前先确认\r\n            this.$messagebox(\r\n                {title:\"消息\",\r\n                message:\"是否删除指定数据\",\r\n                showConfirmButton:true,\r\n                showCancelButton:true\r\n                }).then(result=>{\r\n                    if(\"cancel\"==result){\r\n                        return;\r\n                    }else{\r\n                 \r\n           //1.获取当前商品的id\r\n             var id=e.target.dataset.id      //dataset放着所有自定义的属性   target指触发的事件\r\n             console.log(id)\r\n           //2.发送ajax删除商品\r\n           var url=\"del\"\r\n           this.axios.get(url,{\r\n               params:{id}\r\n           }).then(result=>{\r\n               console.log(result.data)\r\n               this.loadMore()\r\n           })\r\n           //3.刷新\r\n           //history.go(0)  刷新到当前地址栏页面，不适合在父组件里面刷新子组件页面，会自动返回父组件页面\r\n           \r\n           //可以直接在子组件里面直接刷新\r\n        }       \r\n      })\r\n     },\r\n     changeState(e){//e事件对象\r\n     //获取当前全选按钮状态\r\n        var state=e.target.checked;\r\n        console.log(state)\r\n        //获取购物车数组列表\r\n        var arr=this.list;\r\n        //创建循环\r\n        for(var item of arr){\r\n            item.cd=state\r\n        }\r\n        //将当前商品cd状态修改为全选状态\r\n     },\r\n     delAll(){\r\n         this.$messagebox({\r\n             title:\"确认框\",\r\n             message:\"是否确认清空购物车\",\r\n             showConfirmButton:true,\r\n             showCancelButton:true\r\n         }).then(result=>{\r\n             if(\"cancel\"==result){\r\n                 return;\r\n             }else{\r\n                 //清空购物车中所有商品\r\n         //1.创建变量保存空字符串\r\n         var str=\"\";\r\n         //2.创建循环遍历数组\r\n         for(var item of this.list){\r\n             str+=item.id+\",\";\r\n         }\r\n         if(str.length==0){\r\n            this.$toast(\"请选中要删除的数据\");\r\n            return;\r\n         }\r\n         console.log(str)\r\n         //3.获取当前元素id拼接字符串\r\n         //4.结果：“1,2,3,”\r\n           //str=str.slice(0,str.length-1)\r\n           str=str.substring(0,str.length-1)\r\n         console.log( str)\r\n         //5.发送ajax请求获取数据\r\n         this.axios.get(\"delAll\",{\r\n             params:{\r\n                 ids:str\r\n             }\r\n         }).then(result=>{\r\n               console.log(result)\r\n               this.loadMore();\r\n         })\r\n       }\r\n      })\r\n    }\r\n   }\r\n}\r\n</script>\r\n<style>\r\n    /*最外层商品容器*/\r\n    .cart-item{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        width:100%;\r\n    }\r\n    /*修改左侧图片与文字*/\r\n    .leftImgTxt{\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    /*修改左侧图片*/\r\n    .img{\r\n        width:100px;\r\n        height:100px;\r\n    }\r\n    .rightImg{\r\n        display: flex;\r\n        align-items: center;\r\n        margin-left: 25px;\r\n    }\r\n    .deleteAll{\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n</style>"]}]}